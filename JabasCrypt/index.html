<!doctype html>
<head>
<title>WebView Javascript Processor</title>
</head>

<body onload="processJavascript();">
    <p>
        <b>This page includes a javascript function that reverses text.</b>
        The javascript function incorporates a special App Inventor feature called <i>window.AppInventor.getWebViewString()</i>, 
        which allows App Inventor apps to communicate with the WebViewer component's internal processing of javascript.
    </p>

    <script>
        var result = new Date().toString();
        var appInventorInput = window.AppInventor.getWebViewString();
            function processJavascript() {
                if (appInventorInput.length > 0) {
                    document.write("WebViewString received FROM app:<br>" + appInventorInput);
                    result = appInventorInput.split("").reverse().join("");
                    document.write("<br>WebViewString sending BACK TO app:<br>" + result);
                } else {
                    document.write("No WebViewString set by app at " + result);
                }
                window.AppInventor.setWebViewString(result);
            }
    </script>

</body>
</html>