<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8 />
	<title>Display a random image.</title>
	<style type="text/css">
	body {margin-top: 30px;}
	</style> 
</head>
<body>
	<script>
	function display_random_image() 
	{
		var remark = "Namaste from India!"
		 
		var theImages = [{
			src: "http://farm4.staticflickr.com/3691/11268502654_f28f05966c_m.jpg",
			width: "240",
			height: "160",
			caption: "The Terrific Taj Mahal!"
		}, {
			src: "http://farm1.staticflickr.com/33/45336904_1aef569b30_n.jpg",
			width: "320",
			height: "195",
			caption: "A stunning sunset!"
		}, {
			src: "http://farm6.staticflickr.com/5211/5384592886_80a512e2c9.jpg",
			width: "500",
			height: "343",
			caption: "A Fabulous Farm!"
		}];
		
		var preBuffer = [];
		for (var i = 0, j = theImages.length; i < j; i++) {
			preBuffer[i] = new Image();
			preBuffer[i].src = theImages[i].src;
			preBuffer[i].width = theImages[i].width;
			preBuffer[i].height = theImages[i].height;
			preBuffer[i].alt = theImages[i].caption;
		}
	   
		// create random image number
		function getRandomInt(min,max) 
		{
			//  return Math.floor(Math.random() * (max - min + 1)) + min;
			imn = Math.floor(Math.random() * (max - min + 1)) + min;
			return preBuffer[imn];
		}  

		// 0 is first image,   preBuffer.length - 1) is  last image
		var newImage = getRandomInt(0, preBuffer.length - 1);
	 
		// remove the previous images
		var images = document.getElementsByTagName('img');
		var l = images.length;
		for (var p = 0; p < l; p++) {
			console.log(images[p].src)
			images[0].parentNode.removeChild(images[0]);
		}
	  
		// remove the previous captions
		var captions = document.getElementsByTagName('p');
		while (captions.length > 0) {
			captions[0].parentNode.removeChild(captions[0]);
		}

		// display the image  
		document.getElementById("Viewer").appendChild(newImage);

		var caption = document.createElement("p");
		var captionText = document.createTextNode(newImage.alt);
		caption.appendChild(captionText);
		document.getElementById("Viewer").appendChild(caption);
	  
		var comment = document.createElement("p");
		var commentText = document.createTextNode(remark)
		comment.appendChild(commentText);
		document.getElementById("Guestbook").appendChild(comment);
	}

	</script>
	<div>
		<button id="jsstyle" 
		onclick="display_random_image();">Show Image</button> 
	</div>
	<div id="Viewer">
		<p id="Caption">
		</p>  
	</div>
</body>
</html>
